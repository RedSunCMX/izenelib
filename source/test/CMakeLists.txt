IF(Boost_FOUND)
  GET_FILENAME_COMPONENT(FileTestHelper
    "${CMAKE_CURRENT_SOURCE_DIR}/TestHelper.h" ABSOLUTE)
  SET(FileTestHelper "${FileTestHelper}")

  GET_FILENAME_COMPONENT(TEST_TMP_DIR
    ${CMAKE_SOURCE_DIR}/testbin/tmp
    ABSOLUTE
    )
  EXECUTE_PROCESS(COMMAND cmake -E make_directory "${TEST_TMP_DIR}")

  # escape path
  STRING(REPLACE "\\" "\\\\" TEST_TMP_DIR ${TEST_TMP_DIR})
  STRING(REPLACE "\n" "\\n" TEST_TMP_DIR ${TEST_TMP_DIR})
  STRING(REPLACE "\"" "\\\"" TEST_TMP_DIR ${TEST_TMP_DIR})

  CONFIGURE_FILE(TestDir.h.in ${CMAKE_CURRENT_SOURCE_DIR}/TestDir.h)

  INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR})
  INCLUDE_DIRECTORIES(${Boost_INCLUDE_DIRS})
  INCLUDE_DIRECTORIES(${wiselib_INCLUDE_DIRS})

  SET(RUNTIME_OUTPUT_DIRECTORY ${CMAKE_SOURCE_DIR}/testbin)

  # ADD_SUBDIRECTORY(3rdparty)
  ADD_SUBDIRECTORY(am)
  # ADD_SUBDIRECTORY(am_test)
  # ADD_SUBDIRECTORY(cache)
  # ADD_SUBDIRECTORY(db)
  # ADD_SUBDIRECTORY(ir)
  # ADD_SUBDIRECTORY(sdb)
  ADD_SUBDIRECTORY(util)

ELSE(Boost_FOUND)
  MESSAGE(STATUS "boost is required in boost")
ENDIF(Boost_FOUND)

