<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>iZENElib - A great library for text processing: sdb_btree&lt; KeyType, ValueType, LockType, Alloc &gt; Class Template Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>sdb_btree&lt; KeyType, ValueType, LockType, Alloc &gt; Class Template Reference</h1><!-- doxytag: class="sdb_btree" --><!-- doxytag: inherits="AccessMethod" --><a class="el" href="classfile.html" title="Defines interface of file.">file</a> version of cc-b*-btree  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="sdb__btree_8h-source.html">sdb_btree.h</a>&gt;</code>
<p>
<div class="dynheader">
Inheritance diagram for sdb_btree&lt; KeyType, ValueType, LockType, Alloc &gt;:</div>
<div class="dynsection">

<p><center><img src="classsdb__btree.png" usemap="#sdb_btree< KeyType, ValueType, LockType, Alloc >_map" border="0" alt=""></center>
<map name="sdb_btree< KeyType, ValueType, LockType, Alloc >_map">
</map>
</div>

<p>
<a href="classsdb__btree-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="15a24f87a9a407de8b68ee054af3b54a"></a><!-- doxytag: member="sdb_btree::sdb_node" ref="15a24f87a9a407de8b68ee054af3b54a" args="" -->
typedef sdb_node_&lt; KeyType, <br class="typebreak">
ValueType, LockType, Alloc &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><b>sdb_node</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="d6105a305901616127f769f0147a5e03"></a><!-- doxytag: member="sdb_btree::DataType" ref="d6105a305901616127f769f0147a5e03" args="" -->
typedef DataType&lt; KeyType, <br class="typebreak">
ValueType &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><b>DataType</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="6c8e77fb4c105a87903d11cb6b28f62c"></a><!-- doxytag: member="sdb_btree::SDBCursor" ref="6c8e77fb4c105a87903d11cb6b28f62c" args="" -->
typedef std::pair&lt; sdb_node <br class="typebreak">
*, size_t &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><b>SDBCursor</b></td></tr>

<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsdb__btree.html#ae55c86e49f1ff7c02f4251ccfe8c625">sdb_btree</a> (const std::string &amp;fileName=&quot;sequentialdb.dat#&quot;)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">constructor  <a href="#ae55c86e49f1ff7c02f4251ccfe8c625"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsdb__btree.html#1f6eb93d26b290d3969de6503672ae07">setBtreeMode</a> (bool delaySplit)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">set mod  <a href="#1f6eb93d26b290d3969de6503672ae07"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsdb__btree.html#c393399c9c8b9a1f06ecb4f4cce15bf0">setMaxKeys</a> (size_t maxkeys)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">set the MaxKeys  <a href="#c393399c9c8b9a1f06ecb4f4cce15bf0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsdb__btree.html#fc9d66b5f80ba33b114c5f4db70a8dc6">setDegree</a> (size_t degree)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">set maxKeys for fileHeader  <a href="#fc9d66b5f80ba33b114c5f4db70a8dc6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsdb__btree.html#930cde276bf7ed268a7005ba92dfbf12">setPageSize</a> (size_t pageSize)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">set tha pageSize of fileHeader.  <a href="#930cde276bf7ed268a7005ba92dfbf12"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsdb__btree.html#a815f13cd8a7cf18a93190e6aa9c4efc">setCacheSize</a> (size_t sz)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">set Cache Size.  <a href="#a815f13cd8a7cf18a93190e6aa9c4efc"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="85f5043da06823365665619cda9eebb2"></a><!-- doxytag: member="sdb_btree::getFileName" ref="85f5043da06823365665619cda9eebb2" args="() const " -->
std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsdb__btree.html#85f5043da06823365665619cda9eebb2">getFileName</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">return the <a class="el" href="classfile.html" title="Defines interface of file.">file</a> name of the SequentialDB <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsdb__btree.html#3930f68c0075a965d79dae75586e611d">open</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">open the database.  <a href="#3930f68c0075a965d79dae75586e611d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsdb__btree.html#2da914c45fec1081667fb22d42a021a5">close</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">close the database.  <a href="#2da914c45fec1081667fb22d42a021a5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="30e2c2e7489f8785c86284e09b75bcfb"></a><!-- doxytag: member="sdb_btree::del" ref="30e2c2e7489f8785c86284e09b75bcfb" args="(const KeyType &amp;key)" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsdb__btree.html#30e2c2e7489f8785c86284e09b75bcfb">del</a> (const KeyType &amp;key)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">del an item from the database <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="3f3988638bc90b19230f5c80dd960dad"></a><!-- doxytag: member="sdb_btree::insert" ref="3f3988638bc90b19230f5c80dd960dad" args="(const DataType &amp;rec)" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsdb__btree.html#3f3988638bc90b19230f5c80dd960dad">insert</a> (const DataType &amp;rec)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">insert an item. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="1bc062c093b1b5599313bcf33af0820f"></a><!-- doxytag: member="sdb_btree::insert" ref="1bc062c093b1b5599313bcf33af0820f" args="(const KeyType &amp;key, const ValueType &amp;value)" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsdb__btree.html#1bc062c093b1b5599313bcf33af0820f">insert</a> (const KeyType &amp;key, const ValueType &amp;value)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">insert an item. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="42fb2964951af3294e544f857f23349b"></a><!-- doxytag: member="sdb_btree::find" ref="42fb2964951af3294e544f857f23349b" args="(const KeyType &amp;key)" -->
ValueType *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsdb__btree.html#42fb2964951af3294e544f857f23349b">find</a> (const KeyType &amp;key)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">find an item given a key. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="1fe7be112c01719109bf98f803777417"></a><!-- doxytag: member="sdb_btree::get" ref="1fe7be112c01719109bf98f803777417" args="(const KeyType &amp;key, ValueType &amp;value)" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><b>get</b> (const KeyType &amp;key, ValueType &amp;value)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a4d71e716f6c61ff4f1f78317dcc9a17"></a><!-- doxytag: member="sdb_btree::find" ref="a4d71e716f6c61ff4f1f78317dcc9a17" args="(const KeyType &amp;key) const " -->
const ValueType *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsdb__btree.html#a4d71e716f6c61ff4f1f78317dcc9a17">find</a> (const KeyType &amp;key) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">find an item given a key. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="cb2ca67cdc1d405212cfd2332b626cda"></a><!-- doxytag: member="sdb_btree::update" ref="cb2ca67cdc1d405212cfd2332b626cda" args="(const KeyType &amp;key, const ValueType &amp;val)" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsdb__btree.html#cb2ca67cdc1d405212cfd2332b626cda">update</a> (const KeyType &amp;key, const ValueType &amp;val)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">updata an item with given key, if it not exist, insert it directly. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="e0bab2b948984fcaae6d38f161fad06f"></a><!-- doxytag: member="sdb_btree::update" ref="e0bab2b948984fcaae6d38f161fad06f" args="(const DataType &amp;rec)" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsdb__btree.html#e0bab2b948984fcaae6d38f161fad06f">update</a> (const DataType &amp;rec)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">updata an item with given key, if it not exist, insert it directly. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="4c3e3043ff613cb1f81d6c7d60279562"></a><!-- doxytag: member="sdb_btree::num_items" ref="4c3e3043ff613cb1f81d6c7d60279562" args="()" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsdb__btree.html#4c3e3043ff613cb1f81d6c7d60279562">num_items</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">get the number of the items. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="4796b30a0a456d6ff6f3c395f9a2647f"></a><!-- doxytag: member="sdb_btree::get" ref="4796b30a0a456d6ff6f3c395f9a2647f" args="(const SDBCursor &amp;locn, DataType &amp;rec)" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsdb__btree.html#4796b30a0a456d6ff6f3c395f9a2647f">get</a> (const SDBCursor &amp;locn, DataType &amp;rec)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">get an item from given Locn. * <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="4e4408d7daafd2fcf1a1baeff8101765"></a><!-- doxytag: member="sdb_btree::get" ref="4e4408d7daafd2fcf1a1baeff8101765" args="(const SDBCursor &amp;locn, KeyType &amp;key, ValueType &amp;value)" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsdb__btree.html#4e4408d7daafd2fcf1a1baeff8101765">get</a> (const SDBCursor &amp;locn, KeyType &amp;key, ValueType &amp;value)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">get an item from given Locn. * <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="0388b79df1693137217f884588e2e30d"></a><!-- doxytag: member="sdb_btree::get_first_locn" ref="0388b79df1693137217f884588e2e30d" args="()" -->
SDBCursor&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsdb__btree.html#0388b79df1693137217f884588e2e30d">get_first_locn</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">get the cursor of the first item. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsdb__btree.html#dfcd196457bcb4517403a6471a7076af">seq</a> (SDBCursor &amp;locn, DataType &amp;rec, ESeqDirection sdir=ESD_FORWARD)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">get the next or prev item.  <a href="#dfcd196457bcb4517403a6471a7076af"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="1e6e4ead81ba7d871919a601fd68c1e6"></a><!-- doxytag: member="sdb_btree::flush" ref="1e6e4ead81ba7d871919a601fd68c1e6" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsdb__btree.html#1e6e4ead81ba7d871919a601fd68c1e6">flush</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">write all the items in memory to <a class="el" href="classfile.html" title="Defines interface of file.">file</a>. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="4336e972867ad749ce98519fe5220bc5"></a><!-- doxytag: member="sdb_btree::commit" ref="4336e972867ad749ce98519fe5220bc5" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsdb__btree.html#4336e972867ad749ce98519fe5220bc5">commit</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">write back the dirypages <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsdb__btree.html#b1f5ad2d92b57af57aca4a06c925bb16">display</a> (std::ostream &amp;os=std::cout, bool onlyheader=true)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="cc591b9dee49543d1a39891f4af1b842"></a><!-- doxytag: member="sdb_btree::search" ref="cc591b9dee49543d1a39891f4af1b842" args="(const KeyType &amp;key)" -->
SDBCursor&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsdb__btree.html#cc591b9dee49543d1a39891f4af1b842">search</a> (const KeyType &amp;key)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the DB cursor of given key. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsdb__btree.html#2761e4efefbe470ca5121c2eb19f6a6e">search</a> (const KeyType &amp;key, SDBCursor &amp;locn)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">get the cursor for given key  <a href="#2761e4efefbe470ca5121c2eb19f6a6e"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
<h3>template&lt;typename KeyType, typename ValueType = NullType, typename LockType = NullLock, typename Alloc = std::allocator&lt;DataType&lt;KeyType,ValueType&gt; &gt;&gt;<br>
 class sdb_btree&lt; KeyType, ValueType, LockType, Alloc &gt;</h3>

<a class="el" href="classfile.html" title="Defines interface of file.">file</a> version of cc-b*-btree 
<p>
A B*-tree is a tree data structure used in the HFS and Reiser4 <a class="el" href="classfile.html" title="Defines interface of file.">file</a> systems, which requires non-root nodes to be at least 2/3 full instead of 1/2. To maintain this, instead of immediately splitting up a node when it gets full, its keys are shared with the node next to it. When both are full, then the two of them are split into three. Now SDBv1.0’s disk space is large than BerkeleyDB when storing the same data set. There is a perspective that, B*-tree can save more disk space than normal btree.<p>
For implementation convience and maintainess, we only apply this delay splitting at leaves nodes.<p>
Merging will occur when two sibling nodes' objCount both less than maxKeys/3/ 
<p>Definition at line <a class="el" href="sdb__btree_8h-source.html#l00042">42</a> of file <a class="el" href="sdb__btree_8h-source.html">sdb_btree.h</a>.</p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="ae55c86e49f1ff7c02f4251ccfe8c625"></a><!-- doxytag: member="sdb_btree::sdb_btree" ref="ae55c86e49f1ff7c02f4251ccfe8c625" args="(const std::string &amp;fileName=&quot;sequentialdb.dat#&quot;)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename KeyType , typename ValueType , typename LockType , typename Alloc &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classsdb__btree.html">sdb_btree</a>&lt; KeyType, ValueType, LockType, Alloc &gt;::<a class="el" href="classsdb__btree.html">sdb_btree</a>           </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>fileName</em> = <code>&quot;sequentialdb.dat#&quot;</code>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
constructor 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fileName</em>&nbsp;</td><td>is the name for data <a class="el" href="classfile.html" title="Defines interface of file.">file</a> if fileName ends with '#', we set b-tree mode to not delay split. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="sdb__btree_8h-source.html#l00493">493</a> of file <a class="el" href="sdb__btree_8h-source.html">sdb_btree.h</a>.</p>

</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="2da914c45fec1081667fb22d42a021a5"></a><!-- doxytag: member="sdb_btree::close" ref="2da914c45fec1081667fb22d42a021a5" args="()" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename KeyType , typename ValueType  = NullType, typename LockType  = NullLock, typename Alloc  = std::allocator&lt;DataType&lt;KeyType,ValueType&gt; &gt;&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classsdb__btree.html">sdb_btree</a>&lt; KeyType, ValueType, LockType, Alloc &gt;::close           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
close the database. 
<p>
if we don't call it, it will be automately called in deconstructor 
<p>Definition at line <a class="el" href="sdb__btree_8h-source.html#l00160">160</a> of file <a class="el" href="sdb__btree_8h-source.html">sdb_btree.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="b1f5ad2d92b57af57aca4a06c925bb16"></a><!-- doxytag: member="sdb_btree::display" ref="b1f5ad2d92b57af57aca4a06c925bb16" args="(std::ostream &amp;os=std::cout, bool onlyheader=true)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename KeyType , typename ValueType  = NullType, typename LockType  = NullLock, typename Alloc  = std::allocator&lt;DataType&lt;KeyType,ValueType&gt; &gt;&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classsdb__btree.html">sdb_btree</a>&lt; KeyType, ValueType, LockType, Alloc &gt;::display           </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&nbsp;</td>
          <td class="paramname"> <em>os</em> = <code>std::cout</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>onlyheader</em> = <code>true</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
for debug. print the shape of the B tree. 
<p>Definition at line <a class="el" href="sdb__btree_8h-source.html#l00317">317</a> of file <a class="el" href="sdb__btree_8h-source.html">sdb_btree.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="3930f68c0075a965d79dae75586e611d"></a><!-- doxytag: member="sdb_btree::open" ref="3930f68c0075a965d79dae75586e611d" args="()" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename KeyType , typename ValueType , typename LockType , typename Alloc &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classsdb__btree.html">sdb_btree</a>&lt; KeyType, ValueType, LockType, Alloc &gt;::open           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
open the database. 
<p>
Everytime we use the database, we mush open it first. 
<p>Definition at line <a class="el" href="sdb__btree_8h-source.html#l01237">1237</a> of file <a class="el" href="sdb__btree_8h-source.html">sdb_btree.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="2761e4efefbe470ca5121c2eb19f6a6e"></a><!-- doxytag: member="sdb_btree::search" ref="2761e4efefbe470ca5121c2eb19f6a6e" args="(const KeyType &amp;key, SDBCursor &amp;locn)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename KeyType , typename ValueType , typename LockType , typename Alloc &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classsdb__btree.html">sdb_btree</a>&lt; KeyType, ValueType, LockType, Alloc &gt;::search           </td>
          <td>(</td>
          <td class="paramtype">const KeyType &amp;&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SDBCursor &amp;&nbsp;</td>
          <td class="paramname"> <em>locn</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
get the cursor for given key 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>locn</em>&nbsp;</td><td>is cursor of key. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>true if key exists otherwise false. </dd></dl>

<p>Definition at line <a class="el" href="sdb__btree_8h-source.html#l00516">516</a> of file <a class="el" href="sdb__btree_8h-source.html">sdb_btree.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="dfcd196457bcb4517403a6471a7076af"></a><!-- doxytag: member="sdb_btree::seq" ref="dfcd196457bcb4517403a6471a7076af" args="(SDBCursor &amp;locn, DataType &amp;rec, ESeqDirection sdir=ESD_FORWARD)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename KeyType , typename ValueType , typename LockType , typename Alloc &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classsdb__btree.html">sdb_btree</a>&lt; KeyType, ValueType, LockType, Alloc &gt;::seq           </td>
          <td>(</td>
          <td class="paramtype">SDBCursor &amp;&nbsp;</td>
          <td class="paramname"> <em>locn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DataType &amp;&nbsp;</td>
          <td class="paramname"> <em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ESeqDirection&nbsp;</td>
          <td class="paramname"> <em>sdir</em> = <code>ESD_FORWARD</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
get the next or prev item. 
<p>
when locn is default value, it will start with firt element when sdri=ESD_FORWARD and start with last element when sdir = ESD_BACKWARD 
<p>Definition at line <a class="el" href="sdb__btree_8h-source.html#l01372">1372</a> of file <a class="el" href="sdb__btree_8h-source.html">sdb_btree.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="1f6eb93d26b290d3969de6503672ae07"></a><!-- doxytag: member="sdb_btree::setBtreeMode" ref="1f6eb93d26b290d3969de6503672ae07" args="(bool delaySplit)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename KeyType , typename ValueType  = NullType, typename LockType  = NullLock, typename Alloc  = std::allocator&lt;DataType&lt;KeyType,ValueType&gt; &gt;&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classsdb__btree.html">sdb_btree</a>&lt; KeyType, ValueType, LockType, Alloc &gt;::setBtreeMode           </td>
          <td>(</td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>delaySplit</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
set mod 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>delaySplit,if</em>&nbsp;</td><td>true, the btree is cc-b*-btee, otherwise is normal cc-b-tree.</td></tr>
  </table>
</dl>
For ascending insertion, cc-b-tree is much faster than cc-b*-btree, while cc-b*-btree uses less disk space and find faster than cc-b-btree. 
<p>Definition at line <a class="el" href="sdb__btree_8h-source.html#l00070">70</a> of file <a class="el" href="sdb__btree_8h-source.html">sdb_btree.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="a815f13cd8a7cf18a93190e6aa9c4efc"></a><!-- doxytag: member="sdb_btree::setCacheSize" ref="a815f13cd8a7cf18a93190e6aa9c4efc" args="(size_t sz)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename KeyType , typename ValueType  = NullType, typename LockType  = NullLock, typename Alloc  = std::allocator&lt;DataType&lt;KeyType,ValueType&gt; &gt;&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classsdb__btree.html">sdb_btree</a>&lt; KeyType, ValueType, LockType, Alloc &gt;::setCacheSize           </td>
          <td>(</td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>sz</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
set Cache Size. 
<p>
Cache Size is the active node number in memory.When cache is full, some nodes will be released.<p>
We would peroidically flush the memory items, according to the cache Size. 
<p>Definition at line <a class="el" href="sdb__btree_8h-source.html#l00136">136</a> of file <a class="el" href="sdb__btree_8h-source.html">sdb_btree.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="fc9d66b5f80ba33b114c5f4db70a8dc6"></a><!-- doxytag: member="sdb_btree::setDegree" ref="fc9d66b5f80ba33b114c5f4db70a8dc6" args="(size_t degree)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename KeyType , typename ValueType  = NullType, typename LockType  = NullLock, typename Alloc  = std::allocator&lt;DataType&lt;KeyType,ValueType&gt; &gt;&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classsdb__btree.html">sdb_btree</a>&lt; KeyType, ValueType, LockType, Alloc &gt;::setDegree           </td>
          <td>(</td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>degree</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
set maxKeys for fileHeader 
<p>
maxKeys is 2*degree Note that it must be at least 6 It can only be called before opened.And it doesn't work when open an existing dat <a class="el" href="classfile.html" title="Defines interface of file.">file</a>, _sfh.maxKeys will be read from <a class="el" href="classfile.html" title="Defines interface of file.">file</a>. 
<p>Definition at line <a class="el" href="sdb__btree_8h-source.html#l00100">100</a> of file <a class="el" href="sdb__btree_8h-source.html">sdb_btree.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="c393399c9c8b9a1f06ecb4f4cce15bf0"></a><!-- doxytag: member="sdb_btree::setMaxKeys" ref="c393399c9c8b9a1f06ecb4f4cce15bf0" args="(size_t maxkeys)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename KeyType , typename ValueType  = NullType, typename LockType  = NullLock, typename Alloc  = std::allocator&lt;DataType&lt;KeyType,ValueType&gt; &gt;&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classsdb__btree.html">sdb_btree</a>&lt; KeyType, ValueType, LockType, Alloc &gt;::setMaxKeys           </td>
          <td>(</td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>maxkeys</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
set the MaxKeys 
<p>
Note that it must be at least 6. It can only be called before open. And it doesn't work when open an existing dat <a class="el" href="classfile.html" title="Defines interface of file.">file</a>, _sfh.maxKeys will be read from <a class="el" href="classfile.html" title="Defines interface of file.">file</a>. 
<p>Definition at line <a class="el" href="sdb__btree_8h-source.html#l00082">82</a> of file <a class="el" href="sdb__btree_8h-source.html">sdb_btree.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="930cde276bf7ed268a7005ba92dfbf12"></a><!-- doxytag: member="sdb_btree::setPageSize" ref="930cde276bf7ed268a7005ba92dfbf12" args="(size_t pageSize)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename KeyType , typename ValueType  = NullType, typename LockType  = NullLock, typename Alloc  = std::allocator&lt;DataType&lt;KeyType,ValueType&gt; &gt;&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classsdb__btree.html">sdb_btree</a>&lt; KeyType, ValueType, LockType, Alloc &gt;::setPageSize           </td>
          <td>(</td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>pageSize</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
set tha pageSize of fileHeader. 
<p>
It can only be called before open.And it doesn't work when open an existing dat <a class="el" href="classfile.html" title="Defines interface of file.">file</a>, _sfh.pageSize will be read from <a class="el" href="classfile.html" title="Defines interface of file.">file</a>.<p>
It should set the pageSize according the maxKeys and max inserting data size. When pageSize is too small, overflowing will occur and cause efficiency to decline. When pageSize is too large, it will waste disk space. 
<p>Definition at line <a class="el" href="sdb__btree_8h-source.html#l00122">122</a> of file <a class="el" href="sdb__btree_8h-source.html">sdb_btree.h</a>.</p>

</div>
</div><p>
<hr>The documentation for this class was generated from the following file:<ul>
<li>/home/Kevin/izenelib/include/am/sdb_btree/<a class="el" href="sdb__btree_8h-source.html">sdb_btree.h</a></ul>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Thu Jun 11 14:08:12 2009 for iZENElib - A great library for text processing by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.7.1 </small></address>
</body>
</html>
